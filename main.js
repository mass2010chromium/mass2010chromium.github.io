// For non-minified JS, see /main-dev.js
let windowHeight=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,windowWidth=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,imageHeightPx=400,scaling=windowHeight/imageHeightPx,imageWidthPx=windowWidth/scaling,imagePlayerWidthPx=7,imagePlayerHeightPx=14,playerSideBuffer=5*imagePlayerWidthPx;function resize_handle(){windowHeight=scrolling_background.getBoundingClientRect().height,windowWidth=scrolling_background.getBoundingClientRect().width,imageWidthPx=windowWidth/(scaling=windowHeight/imageHeightPx),updatePlayerOnScreen(),setAutomove()}let moving=!1,scrolling_background=document.getElementById("scrollables");function scroll_handle(){!moving&&Math.abs(anticipated_scroll-scrolling_background.scrollLeft)>1&&(leftBorderX=scrolling_background.scrollLeft/scaling,setAutomove()),updatePlayerOnScreen()}function setAutomove(){playerX-leftBorderX<playerSideBuffer?(playerAutoMove=!0,playerTargetX=leftBorderX+2*playerSideBuffer):leftBorderX+imageWidthPx-playerX-imagePlayerWidthPx<playerSideBuffer&&(playerAutoMove=!0,playerTargetX=leftBorderX+imageWidthPx-2*playerSideBuffer-imagePlayerWidthPx)}let player_box=document.getElementById("player"),playerX=imageWidthPx-playerSideBuffer-imagePlayerWidthPx,playerY=370,anticipated_scroll=0,leftBorderX=0,arrowUp=!1,arrowDown=!1,arrowLeft=!1,arrowRight=!1,playerAutoMove=!1,playerTargetX=0;function keyDownHandler(e){let r=!1;38===e.keyCode?(arrowUp=!0,r=!0):40===e.keyCode?(arrowDown=!0,r=!0):37===e.keyCode?(arrowLeft=!0,r=!0):39===e.keyCode&&(arrowRight=!0,r=!0),r&&e.preventDefault()}function keyUpHandler(e){38===e.keyCode?arrowUp=!1:40===e.keyCode?arrowDown=!1:37===e.keyCode?arrowLeft=!1:39===e.keyCode&&(arrowRight=!1)}function playerOnScreen(){return playerX>leftBorderX-imagePlayerWidthPx&&playerX<leftBorderX+imageWidthPx-imagePlayerWidthPx}function loop(){if(arrowUp&&(playerY-=2),arrowDown&&(playerY+=2),arrowLeft&&(playerX-=5),arrowRight&&(playerX+=5),(moving=arrowUp||arrowDown||arrowLeft||arrowRight)&&(playerAutoMove=!1,playerX-leftBorderX<playerSideBuffer?leftBorderX=playerX-playerSideBuffer:leftBorderX+imageWidthPx-playerX-imagePlayerWidthPx<playerSideBuffer&&(leftBorderX=playerX+playerSideBuffer-imageWidthPx+imagePlayerWidthPx)),playerAutoMove){let e=.3*(playerTargetX-playerX),r=15;playerOnScreen()&&(r=5),e<-r&&(e=-r),e>r&&(e=r),playerX+=e,Math.abs(e)<1&&(playerAutoMove=!1)}playerX<0&&(playerX=0),playerX+imagePlayerWidthPx>2399.9&&(playerX=2399.9-imagePlayerWidthPx),playerY<355-imagePlayerHeightPx&&(playerY=355-imagePlayerHeightPx),playerY>395-imagePlayerHeightPx&&(playerY=395-imagePlayerHeightPx);let e=leftBorderX*scaling,r=scrolling_background.scrollLeft,l=.3*(e-r);anticipated_scroll=r+l,scrolling_background.scrollBy?scrolling_background.scrollBy(l,0):scrolling_background.scrollLeft=r+l,updatePlayerOnScreen()}function updatePlayerOnScreen(){player_box.style.left=playerX*scaling-scrolling_background.scrollLeft+"px",player_box.style.top=playerY*scaling+"px",playerOnScreen()?player_box.style.display="block":player_box.style.display="none"}window.addEventListener("keydown",keyDownHandler),window.addEventListener("keyup",keyUpHandler),setInterval(loop,30),resize_handle();
